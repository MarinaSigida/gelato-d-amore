import{r as a,u as y,n as k,a as S,e as E,j as s,G as C,t,p as I}from"./index-DibXn3i7.js";import{F as L,a as z,b as d}from"./formik.esm-DbPzu7QI.js";import{h as g,s as w}from"./hide-DTZSLjd8.js";const T="/assets/images/signup-background.jpg",f="/assets/images/signup-background-mobile.png",B=()=>{var u;const[h,l]=a.useState(f),[o,x]=a.useState(!1),[i,j]=a.useState(!1),c=y(),N=((u=k().state)==null?void 0:u.from)||"/",{loading:v,error:m,isAuthenticated:n}=S(e=>e.user),p=E();a.useEffect(()=>{const e=()=>{window.innerWidth<=430?l(f):l(T)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),a.useEffect(()=>{n&&p(N)},[n,p]);const P=async e=>{try{const r=await c(C({email:e.email,password:e.password})).unwrap();t.success("Inscription réussie ! Vous êtes connecté."),c(I(r))}catch(r){r?t.error(r):t.error("Une erreur est survenue lors de l'inscription. Veuillez réessayer plus tard.")}};if(n)return s.jsx("div",{children:"You are logged in!"});const b=e=>{const r=/^(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})/;if(e){if(!r.test(e))return"Le mot de passe doit contenir au moins 8 caractères, un chiffre, et un symbole"}else return"Le mot de passe est requis";return null};return s.jsx("div",{className:"main",children:s.jsxs("div",{className:"login-container",children:[s.jsx("div",{className:"login-background-image",style:{backgroundImage:`url(${h})`}}),s.jsxs("div",{className:"login-form-wrapper",children:[s.jsx(L,{initialValues:{email:"",password:"",confirmPassword:""},onSubmit:P,validate:e=>{const r={};return e.email||(r.email="L'email est requis"),e.password!==e.confirmPassword&&(r.confirmPassword="Les mots de passe ne correspondent pas"),r},children:({errors:e,touched:r})=>s.jsxs(z,{className:"login-form",children:[s.jsx("h2",{children:"BIENVENUE"}),s.jsxs("div",{className:"login-inputs",children:[s.jsx("div",{className:"login-input",children:s.jsx(d,{type:"email",name:"email",placeholder:"Votre adresse email",required:!0})}),e.email&&r.email&&s.jsx("p",{className:"form-error",children:e.email}),s.jsxs("div",{className:"login-input password-input-wrapper",children:[s.jsx(d,{type:o?"text":"password",name:"password",placeholder:"Votre mot de passe",validate:b,required:!0}),s.jsx("img",{src:o?g:w,className:"show-hide-password-icon",alt:"Toggle Password",onClick:()=>x(!o)})]}),e.password&&r.password&&s.jsx("p",{className:"form-error",children:e.password}),!e.password&&r.password&&s.jsx("p",{style:{color:"green",fontSize:"14px"},children:"Mot de passe valide ✅"}),s.jsxs("div",{className:"login-input password-input-wrapper",children:[s.jsx(d,{type:i?"text":"password",name:"confirmPassword",placeholder:"Confirmez votre mot de passe",required:!0}),s.jsx("img",{src:i?g:w,className:"show-hide-password-icon",alt:"Toggle Password",onClick:()=>j(!i)})]}),e.confirmPassword&&r.confirmPassword&&s.jsx("p",{className:"form-error",children:e.confirmPassword})]}),m&&s.jsx("p",{className:"form-error",style:{marginBottom:"40px"},children:m}),s.jsxs("button",{type:"submit",children:[" ",v?"Création d'un compte...":"Créer un compte"]})]})}),s.jsx("div",{className:"signup-link",children:s.jsx("a",{href:"login",children:"J'ai déja un compte"})})]})]})})};export{B as default};
