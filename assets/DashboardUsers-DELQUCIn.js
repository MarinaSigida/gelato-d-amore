import{g,j as e,u as j,O as D,c as N,p as C,t as m,q as v,r as c,a as k}from"./index-DwZ3t2nt.js";import{B as w}from"./Banner-DCpH-yP8.js";import{p as E,b as x,a as S,c as I}from"./placeholder-user-B-d_r_MN.js";import{S as B}from"./ScrollUpButton-zt652wkc.js";const O="/assets/userNew-DH2944E-.png",P=({id:a,email:t,role:r,onDeleteClick:l})=>{const i=g(),o=d=>{d.preventDefault(),i(`/dashboard/users/${a}`)};return e.jsxs("div",{className:"user-card",children:[e.jsxs("div",{children:[e.jsx("div",{className:"user-card-image",children:e.jsx("img",{src:r==="admin"?O:E,alt:r==="admin"?"Admin picture":"User picture"})}),e.jsxs("div",{className:"user-card-content",children:[e.jsx("p",{children:t}),e.jsxs("p",{children:["Rôle :",e.jsxs("span",{className:"info-bold",children:[" ",r]})]})]})]}),e.jsxs("div",{className:"user-card-buttons",children:[e.jsx("button",{onClick:o,children:"Modifier"}),e.jsx("button",{onClick:()=>l(t),children:"Supprimer"})]})]})},y=({isPopupOpen:a,closePopup:t,email:r,userId:l})=>{const i=j(),o=async()=>{try{await i(C(l)).unwrap(),m.success("Utilisateur supprimé avec succés."),i(v()),t()}catch(n){console.error("Failed to delete user:",n),m.error("Échec de suppression de l'utilisateur.")}},d=n=>{n.target===n.currentTarget&&t()};return a?e.jsx(D,{onClick:d,children:e.jsxs("div",{className:`popup-container ${a?"open":"closed"}`,children:[e.jsx("div",{onClick:t,className:"icon-close",children:e.jsx("img",{src:N,alt:"close"})}),e.jsxs("div",{className:"popup-content",children:[e.jsxs("h3",{children:["Etes-vous sûr de vouloir supprimer l'utilisateur"," ",e.jsx("span",{children:r}),"?"]}),e.jsxs("div",{className:"popup-buttons",children:[e.jsx("button",{onClick:o,children:"Oui"}),e.jsx("button",{onClick:t,children:"Non"})]})]})]})}):null},T=()=>{const[a,t]=c.useState(x),[r,l]=c.useState(!1),[i,o]=c.useState(""),[d,n]=c.useState(""),p=j(),{users:f,loading:z,error:A}=k(s=>s.usersData);c.useEffect(()=>{p(v())},[p]),c.useEffect(()=>{const s=()=>{const u=window.innerWidth;u<=430?t(x):u<=768?t(S):t(I)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const h=()=>{l(!r)},b=(s,u)=>{n(s),o(u),h()},U=f.filter(s=>s.active);return e.jsxs("div",{className:"main",children:[e.jsx(w,{image:a,titleSpan:"Gestion des utilisateurs",textColorExtra:"white",textPosition:"left"}),e.jsx("section",{className:"users",children:e.jsx("div",{className:"users-list",children:U.map(s=>e.jsx(P,{id:s._id,email:s.email,role:s.role,onDeleteClick:()=>b(s._id,s.email)},s._id))})}),e.jsx(y,{isPopupOpen:r,closePopup:h,email:i,userId:d}),e.jsx(B,{})]})};export{T as default};
