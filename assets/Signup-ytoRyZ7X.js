import{r as a,u as h,a as w,e as j,j as e,D as x,t as c,o as f}from"./index-BdA9QrQ_.js";import{F as v,a as N,b as n}from"./formik.esm-DlCdIt35.js";const b="/assets/images/signup-background.jpg",l="/assets/images/signup-background-mobile.png",y=()=>{const[m,o]=a.useState(l),t=h(),{loading:p,error:u,isAuthenticated:r}=w(s=>s.user),d=j();a.useEffect(()=>{const s=()=>{window.innerWidth<=430?o(l):o(b)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),a.useEffect(()=>{r&&d("/")},[r,d]);const g=async s=>{try{const i=await t(x({email:s.email,password:s.password})).unwrap();c.success("Inscription réussie ! Vous pouvez maintenant vous connecter."),t(f(i))}catch(i){console.error("Registration failed:",i),c.error("Une erreur est survenue lors de l'inscription. Veuillez réessayer plus tard.")}};return r?e.jsx("div",{children:"You are logged in!"}):e.jsx("div",{className:"main",children:e.jsxs("div",{className:"login-container",children:[e.jsx("div",{className:"login-background-image",style:{backgroundImage:`url(${m})`}}),e.jsxs("div",{className:"login-form-wrapper",children:[e.jsx(v,{initialValues:{email:"",password:"",confirmPassword:""},onSubmit:g,validate:s=>{const i={};return s.email||(i.email="L'email est requis"),s.password||(i.password="Le mot de passe est requis"),s.password!==s.confirmPassword&&(i.confirmPassword="Les mots de passe ne correspondent pas"),i},children:({errors:s,touched:i})=>e.jsxs(N,{className:"login-form",children:[e.jsx("h2",{children:"BIENVENUE"}),e.jsxs("div",{className:"login-inputs",children:[e.jsx("div",{className:"login-input",children:e.jsx(n,{type:"email",name:"email",placeholder:"Votre adresse email",required:!0})}),s.email&&i.email&&e.jsx("p",{children:s.email}),e.jsx("div",{className:"login-input",children:e.jsx(n,{type:"password",name:"password",placeholder:"Votre mot de passe",required:!0})}),s.password&&i.password&&e.jsx("p",{children:s.password}),e.jsx("div",{className:"login-input",children:e.jsx(n,{type:"password",name:"confirmPassword",placeholder:"Confirmez votre mot de passe",required:!0})}),s.confirmPassword&&i.confirmPassword&&e.jsx("p",{children:s.confirmPassword})]}),u&&e.jsx("p",{className:"error-message",children:"L'utilisateur avec cette adresse e-mail existe déjà"}),e.jsxs("button",{type:"submit",children:[" ",p?"Création d'un compte...":"Créer un compte"]})]})}),e.jsx("div",{className:"signup-link",children:e.jsx("a",{href:"login",children:"J'ai déja un compte"})})]})]})})};export{y as default};
