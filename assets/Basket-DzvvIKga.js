import{e as h,j as e,c as k,r as o,a as d,u as g,q as N}from"./index-DibXn3i7.js";import{O as f}from"./OverlayPopup.styled-Dp_1erdK.js";import{B}from"./Banner-D_f0ax--.js";import{b as m,B as C,a as S}from"./banner-basket-mobile-BtFNAUml.js";import{S as w}from"./ScrollUpButton-mC5BkKue.js";import"./placeholder-ice-cream-CrNkbAc3.js";const y=({isPopupOpen:c,closePopup:n})=>{const a=h(),i=r=>{r.target===r.currentTarget&&n()},t=()=>{a("/register",{state:{from:"/basket"}}),n()},l=()=>{a("/login",{state:{from:"/basket"}}),n()};return e.jsx(e.Fragment,{children:e.jsx(f,{onClick:i,children:e.jsxs("div",{className:`popup-container ${c?"open":"closed"}`,children:[e.jsx("div",{onClick:n,className:"icon-close",children:e.jsx("img",{src:k,alt:"close"})}),e.jsxs("div",{className:"signin-popup-content",children:[e.jsx("h2",{children:"Connexion ou inscription requise"}),e.jsx("ul",{className:"signin-popup-benefits",children:e.jsx("li",{children:"Pour passer une commande, vous devez être connecté ou créer un compte."})}),e.jsxs("div",{className:"signin-buttons",children:[e.jsx("div",{className:"signin-button",children:e.jsx("button",{onClick:l,children:"Se connecter"})}),e.jsx("div",{className:"divider",children:e.jsx("span",{children:"OU"})}),e.jsx("div",{className:"signin-button",children:e.jsx("button",{onClick:t,children:"S'inscrire"})})]})]})]})})})},R=()=>{const[c,n]=o.useState(m),[a,i]=o.useState(!1),{items:t,totalQuantity:l,totalAmount:r}=d(s=>s.basket),p=d(s=>s.user.user),x=h(),u=g();o.useEffect(()=>{const s=()=>{window.innerWidth<=430?n(m):n(S)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const j=()=>{u(N())},v=()=>{p?x("/place-order"):i(!0)},b=()=>{i(!1)};return e.jsxs("div",{className:"main",children:[e.jsx(B,{image:c}),e.jsxs("section",{className:"basket",children:[e.jsxs("h2",{className:"basket-title",children:["bienvenue dans votre ",e.jsx("span",{children:"panier"}),"!"]}),e.jsx("div",{className:"basket-content",children:e.jsxs("div",{className:"basket-items-total",children:[e.jsxs("div",{className:"basket-total",children:[e.jsxs("div",{className:"basket-total-price",children:[e.jsx("p",{children:"Coût total"}),e.jsx("div",{className:"price",children:e.jsxs("p",{children:[r," €"]})})]}),e.jsxs("div",{className:"basket-total-quantity",children:[e.jsx("p",{children:"Quantité"}),e.jsx("div",{className:"quantity",children:e.jsxs("p",{children:[l*450/1e3," kg"]})})]}),t.length>0&&e.jsx("div",{children:e.jsx("button",{className:"empty-basket-button",onClick:j,children:e.jsx("p",{children:"Vider le panier"})})})]}),e.jsx("div",{className:"basket-items",children:t.length>0?t.map(s=>e.jsx(C,{item:s},s.id)):e.jsx("div",{className:"empty-basket-message",children:e.jsx("p",{children:"Votre panier est vide."})})}),t.length>0&&e.jsx("div",{children:e.jsx("button",{onClick:v,children:"Passer commande"})})]})})]}),a&&e.jsx(y,{isPopupOpen:a,closePopup:b}),e.jsx(w,{})]})};export{R as default};
