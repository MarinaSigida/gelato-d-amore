import{e as b,j as e,u as x,c as f,q as U,r as i,a as D,t as N}from"./index-BIk-NbIX.js";import{B as g}from"./Banner-CxWdXLyf.js";import{p as C,b as m,a as k,c as w}from"./placeholder-user-B-d_r_MN.js";import{O as E}from"./OverlayPopup.styled-B9oXmdWH.js";const S="/assets/userNew-DH2944E-.png",I=({id:a,email:t,role:r,onDeleteClick:l})=>{const c=b(),o=d=>{d.preventDefault(),c(`/dashboard/users/${a}`)};return e.jsxs("div",{className:"user-card",children:[e.jsxs("div",{children:[e.jsx("div",{className:"user-card-image",children:e.jsx("img",{src:r==="admin"?S:C,alt:r==="admin"?"Admin picture":"User picture"})}),e.jsxs("div",{className:"user-card-content",children:[e.jsx("p",{children:t}),e.jsxs("p",{children:["Rôle :",e.jsxs("span",{className:"info-bold",children:[" ",r]})]})]})]}),e.jsxs("div",{className:"user-card-buttons",children:[e.jsx("button",{onClick:o,children:"Modifier"}),e.jsx("button",{onClick:()=>l(t),children:"Supprimer"})]})]})},O=({isPopupOpen:a,closePopup:t,email:r,userId:l})=>{const c=x(),o=async()=>{try{await c(U(l)).unwrap(),t()}catch(n){console.error("Failed to delete user:",n)}},d=n=>{n.target===n.currentTarget&&t()};return a?e.jsx(E,{onClick:d,children:e.jsxs("div",{className:`popup-container ${a?"open":"closed"}`,children:[e.jsx("div",{onClick:t,className:"icon-close",children:e.jsx("img",{src:f,alt:"close"})}),e.jsxs("div",{className:"popup-content",children:[e.jsxs("h3",{children:["Etes-vous sûr de vouloir supprimer l'utilisateur"," ",e.jsx("span",{children:r}),"?"]}),e.jsxs("div",{className:"popup-buttons",children:[e.jsx("button",{onClick:o,children:"Oui"}),e.jsx("button",{onClick:t,children:"Non"})]})]})]})}):null},_=()=>{const[a,t]=i.useState(m),[r,l]=i.useState(!1),[c,o]=i.useState(""),[d,n]=i.useState(""),p=x(),{users:j,loading:B,error:P}=D(s=>s.usersData);i.useEffect(()=>{p(N())},[p]),i.useEffect(()=>{const s=()=>{const u=window.innerWidth;u<=430?t(m):u<=768?t(k):t(w)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const h=()=>{l(!r)},v=(s,u)=>{n(s),o(u),h()};return e.jsxs("div",{className:"main",children:[e.jsx(g,{image:a,titleSpan:"Gestion des utilisateurs",textColorExtra:"white",textPosition:"left"}),e.jsx("section",{className:"users",children:e.jsx("div",{className:"users-list",children:j.map(s=>e.jsx(I,{id:s._id,email:s.email,role:s.role,onDeleteClick:()=>v(s._id,s.email)},s._id))})}),e.jsx(O,{isPopupOpen:r,closePopup:h,email:c,userId:d})]})};export{_ as default};
