import{e as b,j as e,u as x,c as f,q as U,r as i,a as D,v as N}from"./index-DqfOK4-j.js";import{B as g}from"./Banner-DQTFi5Ef.js";import{p as C,b as m,a as k,c as w}from"./placeholder-user-B-d_r_MN.js";import{O as E}from"./OverlayPopup.styled-DSydNYh_.js";const S="/assets/userNew-DH2944E-.png",I=({id:a,email:r,role:t,onDeleteClick:l})=>{const c=b(),o=d=>{d.preventDefault(),c(`/dashboard/users/${a}`)};return e.jsxs("div",{className:"user-card",children:[e.jsxs("div",{children:[e.jsx("div",{className:"user-card-image",children:e.jsx("img",{src:t==="admin"?S:C,alt:t==="admin"?"Admin picture":"User picture"})}),e.jsxs("div",{className:"user-card-content",children:[e.jsx("p",{children:r}),e.jsxs("p",{children:["Rôle :",e.jsxs("span",{className:"info-bold",children:[" ",t]})]})]})]}),e.jsxs("div",{className:"user-card-buttons",children:[e.jsx("button",{onClick:o,children:"Modifier"}),e.jsx("button",{onClick:()=>l(r),children:"Supprimer"})]})]})},O=({isPopupOpen:a,closePopup:r,email:t,userId:l})=>{const c=x(),o=async()=>{try{await c(U(l)).unwrap(),r()}catch(n){console.error("Failed to delete user:",n)}},d=n=>{n.target===n.currentTarget&&r()};return a?e.jsx(E,{onClick:d,children:e.jsxs("div",{className:`popup-container ${a?"open":"closed"}`,children:[e.jsx("div",{onClick:r,className:"icon-close",children:e.jsx("img",{src:f,alt:"close"})}),e.jsxs("div",{className:"popup-content",children:[e.jsxs("h3",{children:["Etes-vous sûr de vouloir supprimer l'utilisateur"," ",e.jsx("span",{children:t}),"?"]}),e.jsxs("div",{className:"popup-buttons",children:[e.jsx("button",{onClick:o,children:"Oui"}),e.jsx("button",{onClick:r,children:"Non"})]})]})]})}):null},_=()=>{const[a,r]=i.useState(m),[t,l]=i.useState(!1),[c,o]=i.useState(""),[d,n]=i.useState(""),p=x(),{users:j,loading:B,error:P}=D(s=>s.usersData);i.useEffect(()=>{p(N())},[p]),i.useEffect(()=>{const s=()=>{const u=window.innerWidth;u<=430?r(m):u<=768?r(k):r(w)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const h=()=>{l(!t)},v=(s,u)=>{n(s),o(u),h()};return e.jsxs("div",{className:"main",children:[e.jsx(g,{image:a,titleSpan:"Gestion des utilisateurs",textColorExtra:"white",textPosition:"left"}),e.jsx("section",{className:"users",children:e.jsx("div",{className:"users-list",children:j.map(s=>e.jsx(I,{id:s._id,email:s.email,role:s.role,onDeleteClick:()=>v(s._id,s.email)},s._id))})}),e.jsx(O,{isPopupOpen:t,closePopup:h,email:c,userId:d})]})};export{_ as default};
