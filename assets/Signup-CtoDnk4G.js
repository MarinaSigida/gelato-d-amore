import{r as a,u as P,a as b,e as y,j as s,F as k,t,o as S}from"./index-jRYEHap4.js";import{F as E,a as C,b as d}from"./formik.esm-Cu0hje6f.js";import{h as u,s as g}from"./hide-DTZSLjd8.js";const I="/assets/images/signup-background.jpg",w="/assets/images/signup-background-mobile.png",V=()=>{const[h,l]=a.useState(w),[i,f]=a.useState(!1),[o,x]=a.useState(!1),c=P(),{loading:j,error:m,isAuthenticated:n}=b(e=>e.user),p=y();a.useEffect(()=>{const e=()=>{window.innerWidth<=430?l(w):l(I)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),a.useEffect(()=>{n&&p("/")},[n,p]);const N=async e=>{try{const r=await c(k({email:e.email,password:e.password})).unwrap();t.success("Inscription réussie ! Vous êtes connecté."),c(S(r))}catch(r){r?t.error(r):t.error("Une erreur est survenue lors de l'inscription. Veuillez réessayer plus tard.")}};if(n)return s.jsx("div",{children:"You are logged in!"});const v=e=>{const r=/^(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})/;if(e){if(!r.test(e))return"Le mot de passe doit contenir au moins 8 caractères, un chiffre, et un symbole"}else return"Le mot de passe est requis";return null};return s.jsx("div",{className:"main",children:s.jsxs("div",{className:"login-container",children:[s.jsx("div",{className:"login-background-image",style:{backgroundImage:`url(${h})`}}),s.jsxs("div",{className:"login-form-wrapper",children:[s.jsx(E,{initialValues:{email:"",password:"",confirmPassword:""},onSubmit:N,validate:e=>{const r={};return e.email||(r.email="L'email est requis"),e.password!==e.confirmPassword&&(r.confirmPassword="Les mots de passe ne correspondent pas"),r},children:({errors:e,touched:r})=>s.jsxs(C,{className:"login-form",children:[s.jsx("h2",{children:"BIENVENUE"}),s.jsxs("div",{className:"login-inputs",children:[s.jsx("div",{className:"login-input",children:s.jsx(d,{type:"email",name:"email",placeholder:"Votre adresse email",required:!0})}),e.email&&r.email&&s.jsx("p",{className:"form-error",children:e.email}),s.jsxs("div",{className:"login-input password-input-wrapper",children:[s.jsx(d,{type:i?"text":"password",name:"password",placeholder:"Votre mot de passe",validate:v,required:!0}),s.jsx("img",{src:i?u:g,className:"show-hide-password-icon",alt:"Toggle Password",onClick:()=>f(!i)})]}),e.password&&r.password&&s.jsx("p",{className:"form-error",children:e.password}),!e.password&&r.password&&s.jsx("p",{style:{color:"green",fontSize:"14px"},children:"Mot de passe valide ✅"}),s.jsxs("div",{className:"login-input password-input-wrapper",children:[s.jsx(d,{type:o?"text":"password",name:"confirmPassword",placeholder:"Confirmez votre mot de passe",required:!0}),s.jsx("img",{src:o?u:g,className:"show-hide-password-icon",alt:"Toggle Password",onClick:()=>x(!o)})]}),e.confirmPassword&&r.confirmPassword&&s.jsx("p",{className:"form-error",children:e.confirmPassword})]}),m&&s.jsx("p",{className:"form-error",style:{marginBottom:"40px"},children:m}),s.jsxs("button",{type:"submit",children:[" ",j?"Création d'un compte...":"Créer un compte"]})]})}),s.jsx("div",{className:"signup-link",children:s.jsx("a",{href:"login",children:"J'ai déja un compte"})})]})]})})};export{V as default};
