import{r as i,D as j,u as v,a as N,e as b,j as e,E as k,t as d,F as E}from"./index-Dbl1aoQ1.js";import{F as y,a as L,b as m}from"./formik.esm-mwx-Xu0V.js";import{h as V,s as I}from"./hide-DTZSLjd8.js";const z="/assets/images/login-background.png",u="/assets/images/login-background-mobile.png",q=()=>{var c;const[p,n]=i.useState(u),[r,g]=i.useState(!1),h=((c=j().state)==null?void 0:c.from)||"/",t=v(),{loading:x,error:w,isAuthenticated:o}=N(s=>s.user),l=b();i.useEffect(()=>{const s=()=>{window.innerWidth<=430?n(u):n(z)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),i.useEffect(()=>{o&&l(h)},[o,l]);const f=async s=>{try{const a=await t(k({email:s.email,password:s.password})).unwrap();d.success("Connexion réussie ! Bienvenue à bord."),t(E(a))}catch(a){console.error("Échec de la connexion :",a),d.error("Échec de la connexion. Veuillez vérifier vos identifiants et réessayer.")}};return o?e.jsx("div",{children:"Vous êtes connecté !"}):e.jsx("div",{className:"main",children:e.jsxs("div",{className:"login-container",children:[e.jsx("div",{className:"login-background-image",style:{backgroundImage:`url(${p})`}}),e.jsxs("div",{className:"login-form-wrapper",children:[e.jsx(y,{initialValues:{email:"",password:""},onSubmit:f,validate:s=>{const a={};return s.email||(a.email="L'email est requis"),s.password||(a.password="Le mot de passe est requis"),a},children:({errors:s,touched:a})=>e.jsxs(L,{className:"login-form",children:[e.jsx("h2",{children:"BIENVENUE"}),e.jsxs("div",{className:"login-inputs",children:[e.jsx("div",{className:"login-input",children:e.jsx(m,{type:"email",name:"email",placeholder:"Votre adresse email",required:!0})}),s.email&&a.email&&e.jsx("p",{className:"form-error",children:s.email}),e.jsxs("div",{className:"login-input password-input-wrapper",children:[e.jsx(m,{type:r?"text":"password",name:"password",placeholder:"Votre mot de passe",required:!0}),e.jsx("img",{src:r?V:I,className:"show-hide-password-icon",alt:"Toggle Password",onClick:()=>g(!r)})]}),s.password&&a.password&&e.jsx("p",{className:"form-error",children:s.password})]}),w&&e.jsx("p",{className:"form-error",style:{marginBottom:"40px"},children:"Utilisateur non trouvé. Veuillez vérifier votre email et mot de passe."}),e.jsxs("button",{type:"submit",children:[" ",x?"Connexion en cours...":"Connexion"]})]})}),e.jsx("div",{className:"signup-link",children:e.jsx("a",{href:"forgot-password",children:"Mot de passe oublié"})}),e.jsx("div",{className:"signup-link",children:e.jsx("a",{href:"register",children:"Créer un compte"})})]})]})})};export{q as default};
