import{e as v,j as e,a as f,r as u,u as g,g as N}from"./index-BdfQoNmw.js";import{r as b}from"./right-arrow-DXl0UKk3.js";import{s as w,d as P}from"./orderUtils-DBNxGViL.js";import{B as S}from"./Banner-DHAT0thW.js";import{b as y}from"./banner-orders-JoudM5Ap.js";import{S as A}from"./ScrollUpButton-COsY8sGq.js";const C=({id:l,number:h,createdAt:j,status:x,deliveryOption:t,deliveryAddress:o,firstName:i,lastName:c,mobilePhone:r,comment:d,orderItems:n})=>{const m=v(),p=a=>{a.preventDefault(),m(`/orders/${l}`)};return e.jsxs("div",{onClick:p,className:"order-container",children:[e.jsx("div",{className:"icon-open",children:e.jsx("img",{src:b,alt:"open"})}),e.jsxs("div",{className:"order-number",children:[e.jsxs("h3",{children:["#",h]}),e.jsxs("p",{children:["Date : ",new Date(j).toLocaleDateString()]})]}),e.jsxs("div",{className:"order-main-info",children:[e.jsx("div",{className:"order-total",children:e.jsxs("div",{children:[e.jsxs("p",{children:["Coût total :"," ",e.jsxs("span",{className:"info-bold",children:[n.reduce((a,s)=>a+s.quantity*s.stockItemId.pricePerUnit,0),"€"]})]}),e.jsxs("p",{children:["Quantité :"," ",e.jsxs("span",{className:"info-bold",children:[n.reduce((a,s)=>a+s.quantity,0)*450/1e3," ","kg"]})]})]})}),e.jsxs("div",{className:"order-delivery-info",children:[e.jsxs("p",{className:"info-bold",children:[i," ",c,", ",r]}),e.jsxs("p",{children:["Statut :"," ",e.jsxs("span",{className:"info-bold",children:[" ",w[x]||"Statut inconnu"]})," "]}),e.jsxs("p",{children:["Mode de livraison :"," ",P[t]||"Option inconnue"]}),t==="delivery"&&e.jsxs("p",{children:["Adresse de livraison :"," ",e.jsx("span",{className:"info-bold",children:o})]}),d&&e.jsxs("p",{children:["Commantaire: ",d]})]})]})]})},z=()=>{const{orders:l,loading:h,error:j,currentPage:x,totalPages:t,totalOrders:o}=f(s=>s.orders),{user:i,isAuthenticated:c}=f(s=>s.user),[r,d]=u.useState(1),[n]=u.useState(5),m=g();u.useLayoutEffect(()=>{c&&i&&i.id&&m(N({userId:i.id,page:r,limit:n}))},[m,c,i,r,n]);const p=()=>{r<t&&d(r+1)},a=()=>{r>1&&d(r-1)};return e.jsxs("div",{className:"main",children:[e.jsx(S,{image:y,title:"Voici vos ",textPosition:"left",titleSpan:"commandes",textColor:"white"}),e.jsxs("section",{className:"orders",children:[e.jsxs("p",{className:"orders-number",children:["Nombre de commandes: ",o]}),h?e.jsx("p",{children:"Loading..."}):l.length>0?l.map(s=>s&&s.order&&s.order._id?e.jsx(C,{id:s.order._id,number:s.order.number,userId:s.order.userId,status:s.order.status,deliveryOption:s.order.deliveryOption,deliveryAddress:s.order.deliveryAddress,createdAt:s.order.createdAt,updatedAt:s.order.updatedAt,orderItems:s.orderItems,firstName:s.order.firstName,lastName:s.order.lastName,mobilePhone:s.order.mobilePhone,comment:s.order.comment},s.order._id):null):e.jsx("p",{children:"Vous n'avez pas encore de commandes"}),o>n&&e.jsxs("div",{className:"pagination",children:[e.jsx("button",{onClick:a,disabled:r===1,children:e.jsx("svg",{fill:"#fff",height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 330 330",xmlSpace:"preserve",transform:"scale(-1 1)",children:e.jsx("path",{d:"m250.606 154.389-150-149.996c-5.857-5.858-15.355-5.858-21.213.001-5.857 5.858-5.857 15.355.001 21.213l139.393 139.39L79.393 304.394c-5.857 5.858-5.857 15.355.001 21.213C82.322 328.536 86.161 330 90 330s7.678-1.464 10.607-4.394l149.999-150.004a14.996 14.996 0 0 0 0-21.213z"})})}),e.jsx("div",{className:"pagination-text",children:e.jsxs("p",{children:["Page ",x," sur ",t]})}),e.jsx("button",{onClick:p,disabled:r===t,children:e.jsx("svg",{fill:"#fff",height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 330 330",xmlSpace:"preserve",children:e.jsx("path",{d:"m250.606 154.389-150-149.996c-5.857-5.858-15.355-5.858-21.213.001-5.857 5.858-5.857 15.355.001 21.213l139.393 139.39L79.393 304.394c-5.857 5.858-5.857 15.355.001 21.213C82.322 328.536 86.161 330 90 330s7.678-1.464 10.607-4.394l149.999-150.004a14.996 14.996 0 0 0 0-21.213z"})})})]})]}),e.jsx(A,{})]})};export{z as default};
