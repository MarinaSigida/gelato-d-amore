import{r as t,a as b,h as v,e as y,u as U,C as w,k as g,j as e,D as N,t as c}from"./index-2xbEl5L_.js";import{F as E,a as D,b as m}from"./formik.esm-CVHYkUEp.js";import{B as F}from"./Banner-9MFqW9Y3.js";import{b as u,p as C,a as L,c as S}from"./placeholder-user-B-d_r_MN.js";const A=()=>{const[h,l]=t.useState(u),{user:a,loading:f,error:o}=b(s=>s.usersData),{id:n}=v(),d=y(),i=U();t.useEffect(()=>{i(w()),i(g(n))},[i,n]),t.useEffect(()=>{const s=()=>{const r=window.innerWidth;r<=430?l(u):r<=768?l(L):l(S)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const x=s=>{s.preventDefault(),d("/dashboard/users")},p=async s=>{const r={email:s.email,role:s.role};console.log("Updated User:",r);try{await i(N({id:a._id,updatedUser:r})).unwrap(),c.success("Utilisateur modifiée avec succès !"),d("/dashboard/users")}catch(j){console.error("Failed to update user:",j),c.error("Échec de modification de d'utilisateur")}};return f?e.jsx("div",{children:"Loading..."}):o?e.jsxs("div",{children:["Error: ",o]}):e.jsxs("div",{className:"main",children:[e.jsx(F,{image:h,titleSpan:"Modifiez l'utilisateurs",textColorExtra:"white",textPosition:"left"}),e.jsx("section",{className:"modify-user",children:e.jsxs("div",{className:"modify-user-form-wrapper",children:[e.jsx("div",{className:"modify-user-form-image",children:e.jsx("img",{src:C,alt:"default user picture"})}),e.jsx(E,{initialValues:{email:(a==null?void 0:a.email)||"",role:(a==null?void 0:a.role)||""},onSubmit:p,validate:s=>{const r={};return s.email||(r.email="L'email est requis"),s.role||(r.role="Le rôle est requis"),r},children:({errors:s,touched:r})=>e.jsxs(D,{className:"modify-user-form",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("div",{className:"modify-user-input",children:e.jsx(m,{name:"email",type:"email",placeholder:"Adresse email"})}),s.email&&r.email&&e.jsx("p",{className:"form-error",children:s.email}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role",children:"Rôle"}),e.jsxs(m,{as:"select",name:"role",id:"role",children:[e.jsx("option",{value:"client",label:"Client"}),e.jsx("option",{value:"admin",label:"Admin"})]})]}),s.role&&r.role&&e.jsx("p",{className:"form-error",children:s.role}),e.jsxs("div",{className:"modify-user-form-buttons",children:[e.jsx("button",{onClick:x,children:"Annuler"}),e.jsx("button",{type:"submit",children:"Modifier"})]})]})})]})})]})};export{A as default};
