import{e as b,j as e,u as j,c as U,q as D,t as m,r as n,a as N,v as g}from"./index-BLs7LIZJ.js";import{B as C}from"./Banner-DHk_BRgZ.js";import{p as k,b as x,a as w,c as E}from"./placeholder-user-B-d_r_MN.js";import{O as S}from"./OverlayPopup.styled-C1r0zZcq.js";import{S as I}from"./ScrollUpButton-ByWfrnIt.js";const B="/assets/userNew-DH2944E-.png",O=({id:a,email:r,role:t,onDeleteClick:c})=>{const l=b(),o=d=>{d.preventDefault(),l(`/dashboard/users/${a}`)};return e.jsxs("div",{className:"user-card",children:[e.jsxs("div",{children:[e.jsx("div",{className:"user-card-image",children:e.jsx("img",{src:t==="admin"?B:k,alt:t==="admin"?"Admin picture":"User picture"})}),e.jsxs("div",{className:"user-card-content",children:[e.jsx("p",{children:r}),e.jsxs("p",{children:["Rôle :",e.jsxs("span",{className:"info-bold",children:[" ",t]})]})]})]}),e.jsxs("div",{className:"user-card-buttons",children:[e.jsx("button",{onClick:o,children:"Modifier"}),e.jsx("button",{onClick:()=>c(r),children:"Supprimer"})]})]})},P=({isPopupOpen:a,closePopup:r,email:t,userId:c})=>{const l=j(),o=async()=>{try{await l(D(c)).unwrap(),m.success("Utilisateur supprimé avec succés."),r()}catch(i){console.error("Failed to delete user:",i),m.error("Échec de suppression de l'utilisateur.")}},d=i=>{i.target===i.currentTarget&&r()};return a?e.jsx(S,{onClick:d,children:e.jsxs("div",{className:`popup-container ${a?"open":"closed"}`,children:[e.jsx("div",{onClick:r,className:"icon-close",children:e.jsx("img",{src:U,alt:"close"})}),e.jsxs("div",{className:"popup-content",children:[e.jsxs("h3",{children:["Etes-vous sûr de vouloir supprimer l'utilisateur"," ",e.jsx("span",{children:t}),"?"]}),e.jsxs("div",{className:"popup-buttons",children:[e.jsx("button",{onClick:o,children:"Oui"}),e.jsx("button",{onClick:r,children:"Non"})]})]})]})}):null},T=()=>{const[a,r]=n.useState(x),[t,c]=n.useState(!1),[l,o]=n.useState(""),[d,i]=n.useState(""),p=j(),{users:v,loading:y,error:z}=N(s=>s.usersData);n.useEffect(()=>{p(g())},[p]),n.useEffect(()=>{const s=()=>{const u=window.innerWidth;u<=430?r(x):u<=768?r(w):r(E)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const h=()=>{c(!t)},f=(s,u)=>{i(s),o(u),h()};return e.jsxs("div",{className:"main",children:[e.jsx(C,{image:a,titleSpan:"Gestion des utilisateurs",textColorExtra:"white",textPosition:"left"}),e.jsx("section",{className:"users",children:e.jsx("div",{className:"users-list",children:v.map(s=>e.jsx(O,{id:s._id,email:s.email,role:s.role,onDeleteClick:()=>f(s._id,s.email)},s._id))})}),e.jsx(P,{isPopupOpen:t,closePopup:h,email:l,userId:d}),e.jsx(I,{})]})};export{T as default};
