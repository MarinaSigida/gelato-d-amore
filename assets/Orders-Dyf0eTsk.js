import{e as f,j as e,u as v,a as p,r as N,g as b}from"./index-DibXn3i7.js";import{r as g}from"./right-arrow-DXl0UKk3.js";import{s as y,d as A}from"./orderUtils-DBNxGViL.js";import{B as O}from"./Banner-D_f0ax--.js";import{b as S}from"./banner-orders-JoudM5Ap.js";import{S as I}from"./ScrollUpButton-mC5BkKue.js";const C=({id:a,number:t,createdAt:o,status:l,deliveryOption:r,deliveryAddress:n,firstName:s,lastName:u,mobilePhone:h,comment:c,orderItems:m})=>{const x=f(),j=i=>{i.preventDefault(),x(`/orders/${a}`)};return e.jsxs("div",{onClick:j,className:"order-container",children:[e.jsx("div",{className:"icon-open",children:e.jsx("img",{src:g,alt:"open"})}),e.jsxs("div",{className:"order-number",children:[e.jsxs("h3",{children:["#",t]}),e.jsxs("p",{children:["Date : ",new Date(o).toLocaleDateString()]})]}),e.jsxs("div",{className:"order-main-info",children:[e.jsx("div",{className:"order-total",children:e.jsxs("div",{children:[e.jsxs("p",{children:["Coût total :"," ",e.jsxs("span",{className:"info-bold",children:[m.reduce((i,d)=>i+d.quantity*d.stockItemId.pricePerUnit,0),"€"]})]}),e.jsxs("p",{children:["Quantité :"," ",e.jsxs("span",{className:"info-bold",children:[m.reduce((i,d)=>i+d.quantity,0)*450/1e3," ","kg"]})]})]})}),e.jsxs("div",{className:"order-delivery-info",children:[e.jsxs("p",{className:"info-bold",children:[s," ",u,", ",h]}),e.jsxs("p",{children:["Statut :"," ",e.jsxs("span",{className:"info-bold",children:[" ",y[l]||"Statut inconnu"]})," "]}),e.jsxs("p",{children:["Mode de livraison :"," ",A[r]||"Option inconnue"]}),r==="delivery"&&e.jsxs("p",{children:["Adresse de livraison :"," ",e.jsx("span",{className:"info-bold",children:n})]}),c&&e.jsxs("p",{children:["Commantaire: ",c]})]})]})]})},L=()=>{const a=v(),{orders:t,loading:o,error:l}=p(s=>s.orders),{user:r,isAuthenticated:n}=p(s=>s.user);return N.useLayoutEffect(()=>{n&&r&&r.id&&a(b(r.id))},[a,n,r]),e.jsxs("div",{className:"main",children:[e.jsx(O,{image:S,title:"Voici vos ",textPosition:"left",titleSpan:"commandes",textColor:"white"}),e.jsx("section",{className:"orders",children:o?e.jsx("p",{children:"Loading..."}):t.length>0?t.map(s=>s&&s.order&&s.order._id?e.jsx(C,{id:s.order._id,number:s.order.number,userId:s.order.userId,status:s.order.status,deliveryOption:s.order.deliveryOption,deliveryAddress:s.order.deliveryAddress,createdAt:s.order.createdAt,updatedAt:s.order.updatedAt,orderItems:s.orderItems,firstName:s.order.firstName,lastName:s.order.lastName,mobilePhone:s.order.mobilePhone,comment:s.order.comment},s.order._id):null):e.jsx("p",{children:"Vous n'avez pas encore de commandes"})}),e.jsx(I,{})]})};export{L as default};
