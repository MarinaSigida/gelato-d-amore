import{g as b,j as s,r as d,u as g,a as N,y as w}from"./index-BesrCjma.js";import{B as S}from"./Banner-DmFbxtNv.js";import{b as v,a as P,c as D}from"./banner-dashboard-orders-mobile-CcmeqHM1.js";import{r as y}from"./right-arrow-DXl0UKk3.js";import{s as A,d as C}from"./orderUtils-DBNxGViL.js";import{S as O}from"./ScrollUpButton-Bs7n_UYq.js";const I=({id:m,number:i,createdAt:a,status:l,deliveryOption:r,deliveryAddress:o,firstName:h,lastName:u,mobilePhone:j,comment:c,orderItems:t})=>{const x=b(),p=n=>{n.preventDefault(),x(`/dashboard/orders/${m}`)};return s.jsxs("div",{onClick:p,className:"order-container",children:[s.jsx("div",{className:"icon-open",children:s.jsx("img",{src:y,alt:"open"})}),s.jsxs("div",{className:"order-number",children:[s.jsxs("h3",{children:["#",i]}),s.jsxs("p",{children:["Date : ",new Date(a).toLocaleDateString()]})]}),s.jsxs("div",{className:"order-main-info",children:[s.jsx("div",{className:"order-total",children:s.jsxs("div",{children:[s.jsxs("p",{children:["Coût total :"," ",s.jsxs("span",{className:"info-bold",children:[t.reduce((n,e)=>n+e.quantity*e.stockItemId.pricePerUnit,0),"€"]})]}),s.jsxs("p",{children:["Quantité :"," ",s.jsxs("span",{className:"info-bold",children:[t.reduce((n,e)=>n+e.quantity,0)*450/1e3," ","kg"]})]})]})}),s.jsxs("div",{className:"order-delivery-info",children:[s.jsxs("p",{className:"info-bold",children:[h," ",u,", ",j]}),s.jsxs("p",{children:["Statut :"," ",s.jsxs("span",{className:"info-bold",children:[" ",A[l]||"Statut inconnu"]})," "]}),s.jsxs("p",{children:["Mode de livraison :"," ",C[r]||"Option inconnue"]}),r==="delivery"&&s.jsxs("p",{children:["Adresse de livraison :"," ",s.jsx("span",{className:"info-bold",children:o})]}),c&&s.jsxs("p",{children:["Commantaire: ",c]})]})]})]})},q=()=>{const[m,i]=d.useState(v),[a,l]=d.useState(1),[r]=d.useState(5),o=g(),{orders:h,loading:u,error:j,currentPage:c,totalPages:t,totalOrders:x}=N(e=>e.orders);d.useEffect(()=>{o(w({page:a,limit:r}))},[o,a,r]),d.useEffect(()=>{const e=()=>{const f=window.innerWidth;f<=430?i(v):f<=768?i(P):i(D)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const p=()=>{a<t&&l(a+1)},n=()=>{a>1&&l(a-1)};return s.jsxs("div",{className:"main",children:[s.jsx(S,{image:m,titleSpan:"Gestion des commandes",textPosition:"right"}),s.jsxs("section",{className:"orders",children:[s.jsxs("p",{className:"orders-number",children:["Nombre de commandes: ",x]}),h.map(e=>s.jsx(I,{id:e._id,number:e.number,userId:e.userId,status:e.status,deliveryOption:e.deliveryOption,deliveryAddress:e.deliveryAddress,createdAt:e.createdAt,updatedAt:e.updatedAt,orderItems:e.orderItems,firstName:e.firstName,lastName:e.lastName,mobilePhone:e.mobilePhone,comment:e.comment},e._id)),s.jsxs("div",{className:"pagination",children:[s.jsx("button",{onClick:n,disabled:a===1,children:s.jsx("svg",{fill:"#fff",height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 330 330",xmlSpace:"preserve",transform:"scale(-1 1)",children:s.jsx("path",{d:"m250.606 154.389-150-149.996c-5.857-5.858-15.355-5.858-21.213.001-5.857 5.858-5.857 15.355.001 21.213l139.393 139.39L79.393 304.394c-5.857 5.858-5.857 15.355.001 21.213C82.322 328.536 86.161 330 90 330s7.678-1.464 10.607-4.394l149.999-150.004a14.996 14.996 0 0 0 0-21.213z"})})}),s.jsx("div",{className:"pagination-text",children:s.jsxs("p",{children:["Page ",c," sur ",t]})}),s.jsx("button",{onClick:p,disabled:a===t,children:s.jsx("svg",{fill:"#fff",height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 330 330",xmlSpace:"preserve",children:s.jsx("path",{d:"m250.606 154.389-150-149.996c-5.857-5.858-15.355-5.858-21.213.001-5.857 5.858-5.857 15.355.001 21.213l139.393 139.39L79.393 304.394c-5.857 5.858-5.857 15.355.001 21.213C82.322 328.536 86.161 330 90 330s7.678-1.464 10.607-4.394l149.999-150.004a14.996 14.996 0 0 0 0-21.213z"})})})]})]}),s.jsx(O,{})]})};export{q as default};
