import{r as a,u as C,j as e,c as S,b as E,a as F,d as N,f as P,s as T}from"./index-DqfOK4-j.js";import{O as B}from"./OverlayPopup.styled-DSydNYh_.js";import{i as O}from"./placeholder-ice-cream-CrNkbAc3.js";import{F as _,I as q}from"./ItemAddedToBasketNotification-CJgFjpbV.js";import{B as D}from"./Banner-DQTFi5Ef.js";var w={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const R=w.VITE_IMAGE_KEY,U=({isPopupOpen:r,closePopup:n,product:t,onAddToBasket:h})=>{const g=i=>{i.target===i.currentTarget&&n()},[c,l]=a.useState(1),p=C(),m=()=>{l(i=>i+1)},x=()=>{c>1&&l(i=>i-1)},o=()=>{const i={id:t._id,title:t.title,image:t.image,price:t.pricePerUnit,quantity:c};p(E(i)),h(i),n(),l(1)};return e.jsx(e.Fragment,{children:e.jsx(B,{onClick:g,children:e.jsxs("div",{className:`popup-container ${r?"open":"closed"}`,children:[e.jsx("div",{onClick:n,className:"icon-close",children:e.jsx("img",{src:S,alt:"close"})}),e.jsxs("div",{className:"product-popup-content",children:[e.jsxs("div",{className:"product-popup-main-content",children:[e.jsx("div",{className:"product-popup-main-content-img",children:e.jsx("img",{src:t.image?`${R}/${t.image}`:O,alt:t.title})}),e.jsxs("div",{className:"product-popup-main-content-text",children:[e.jsx("h3",{children:t.title}),e.jsx("p",{className:"flavor-category",children:t.category}),e.jsx("p",{className:"flavor-description",children:t.description}),e.jsx("div",{className:"flavor-size",children:e.jsx("p",{children:"Poids : 450 g"})})]})]}),e.jsxs("div",{className:"price-and-quantity",children:[e.jsx("div",{className:"price",children:e.jsxs("p",{children:[t.pricePerUnit*c," €"]})}),e.jsx("div",{className:"quantity",children:e.jsx("p",{children:c})}),e.jsxs("div",{className:"quantity-btn-container",children:[e.jsx("button",{className:"quantity-btn",onClick:m,children:"+"}),e.jsx("button",{className:"quantity-btn",onClick:x,children:"-"})]})]}),e.jsx("button",{className:"buy-btn",onClick:o,style:{padding:"8px 14px"},children:"Ajouter au panier"})]})]})})})},u=({category:r,isActive:n,onClick:t})=>e.jsx("div",{children:e.jsx("button",{className:`catalog-filter-btn ${n?"active":""}`,onClick:t,children:r})}),z="/assets/images/banner-catalog.png",y="/assets/images/banner-catalog-mobile.png",Q=()=>{const[r,n]=a.useState(y),[t,h]=a.useState("Tous"),[g,c]=a.useState([]),[l,p]=a.useState(null),[m,x]=a.useState(!1),o=C(),{items:i,loading:$,error:f,selectedItem:j}=F(s=>s.stockItems);a.useEffect(()=>{o(N()),o(P())},[o]),a.useEffect(()=>{const s=()=>{window.innerWidth<=430?n(y):n(z)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),a.useEffect(()=>{if(t==="Tous")c(i);else{const s=i.filter(I=>I.category===t);c(s)}},[i,t]);const d=s=>{h(s)},k=s=>{o(T(s))},b=()=>{o(N())},A=()=>{x(!1),p(null)},v=s=>{p(s),x(!0)};return f?e.jsxs("div",{children:["Error: ",f]}):e.jsxs("div",{className:"main",children:[e.jsx(D,{image:r,title:"Bisous, ",textPosition:"center",titleSpan:"I love you!"}),e.jsxs("section",{className:"catalog",children:[e.jsxs("h2",{children:["NOS ",e.jsx("span",{children:"GOÛTS"})]}),e.jsxs("div",{className:"catalog-filters-bar",children:[e.jsx(u,{category:"Tous",isActive:t==="Tous",onClick:()=>d("Tous")}),e.jsx(u,{category:"Crème",isActive:t==="Crème",onClick:()=>d("Crème")}),e.jsx(u,{category:"Fruits",isActive:t==="Fruits",onClick:()=>d("Fruits")}),e.jsx(u,{category:"Noix",isActive:t==="Noix",onClick:()=>d("Noix")}),e.jsx(u,{category:"Fruits rouges",isActive:t==="Fruits rouges",onClick:()=>d("Fruits rouges")})]}),e.jsx("div",{className:"catalog-list",children:g.map(s=>e.jsx(_,{id:s._id,image:s.image,title:s.title,description:s.description,pricePerUnit:s.pricePerUnit,quantity:s.quantity,category:s.category,createdAt:s.createdAt,updatedAt:s.updatedAt,status:s.status,onClick:()=>k(s),onAddToBasket:v},s._id))}),j&&e.jsx(U,{isPopupOpen:!!j,closePopup:b,product:j,onAddToBasket:v}),m&&e.jsx(q,{isPopupOpen:m,closePopup:A,item:l})]})]})};export{Q as default};
