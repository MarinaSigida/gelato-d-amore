import{j as e,c as b,r as c,a as l,e as k,u as g,p as N}from"./index-BLs7LIZJ.js";import{O as f}from"./OverlayPopup.styled-C1r0zZcq.js";import{B}from"./Banner-DHk_BRgZ.js";import{b as o,B as C,a as P}from"./banner-basket-mobile-BSNH-PG4.js";import{S}from"./ScrollUpButton-ByWfrnIt.js";import"./placeholder-ice-cream-CrNkbAc3.js";const w=({isPopupOpen:r,closePopup:n})=>{const t=a=>{a.target===a.currentTarget&&n()};return e.jsx(e.Fragment,{children:e.jsx(f,{onClick:t,children:e.jsxs("div",{className:`popup-container ${r?"open":"closed"}`,children:[e.jsx("div",{onClick:n,className:"icon-close",children:e.jsx("img",{src:b,alt:"close"})}),e.jsxs("div",{className:"signin-popup-content",children:[e.jsx("h2",{children:"Connexion ou inscription requise"}),e.jsx("ul",{className:"signin-popup-benefits",children:e.jsx("li",{children:"Pour passer une commande, vous devez être connecté ou créer un compte."})}),e.jsxs("div",{className:"signin-buttons",children:[e.jsx("div",{className:"signin-button",children:e.jsx("button",{children:e.jsx("a",{href:"/login",children:"Se connecter"})})}),e.jsx("div",{className:"divider",children:e.jsx("span",{children:"OU"})}),e.jsx("div",{className:"signin-button",children:e.jsx("button",{children:e.jsx("a",{href:"/register",children:"S'inscrire"})})})]})]})]})})})},L=()=>{const[r,n]=c.useState(o),[t,a]=c.useState(!1),{items:i,totalQuantity:d,totalAmount:p}=l(s=>s.basket),h=l(s=>s.user.user),m=k(),x=g();c.useEffect(()=>{const s=()=>{window.innerWidth<=430?n(o):n(P)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const u=()=>{x(N())},j=()=>{h?m("/place-order"):a(!0)},v=()=>{a(!1)};return e.jsxs("div",{className:"main",children:[e.jsx(B,{image:r}),e.jsxs("section",{className:"basket",children:[e.jsxs("h2",{className:"basket-title",children:["bienvenue dans votre ",e.jsx("span",{children:"panier"}),"!"]}),e.jsx("div",{className:"basket-content",children:e.jsxs("div",{className:"basket-items-total",children:[e.jsxs("div",{className:"basket-total",children:[e.jsxs("div",{className:"basket-total-price",children:[e.jsx("p",{children:"Coût total"}),e.jsx("div",{className:"price",children:e.jsxs("p",{children:[p," €"]})})]}),e.jsxs("div",{className:"basket-total-quantity",children:[e.jsx("p",{children:"Quantité"}),e.jsx("div",{className:"quantity",children:e.jsxs("p",{children:[d*450/1e3," kg"]})})]}),i.length>0&&e.jsx("div",{children:e.jsx("button",{className:"empty-basket-button",onClick:u,children:e.jsx("p",{children:"Vider le panier"})})})]}),e.jsx("div",{className:"basket-items",children:i.length>0?i.map(s=>e.jsx(C,{item:s},s.id)):e.jsx("div",{className:"empty-basket-message",children:e.jsx("p",{children:"Votre panier est vide."})})}),i.length>0&&e.jsx("div",{children:e.jsx("button",{onClick:j,children:"Passer commande"})})]})})]}),t&&e.jsx(w,{isPopupOpen:t,closePopup:v}),e.jsx(S,{})]})};export{L as default};
