import{e as b,j as e,r as d,u as g,a as N,A as w}from"./index-BdfQoNmw.js";import{B as S}from"./Banner-DHAT0thW.js";import{b as v,a as P,c as D}from"./banner-dashboard-orders-mobile-CcmeqHM1.js";import{r as A}from"./right-arrow-DXl0UKk3.js";import{s as y,d as C}from"./orderUtils-DBNxGViL.js";import{S as O}from"./ScrollUpButton-COsY8sGq.js";const I=({id:m,number:i,createdAt:a,status:l,deliveryOption:r,deliveryAddress:o,firstName:h,lastName:u,mobilePhone:j,comment:c,orderItems:t})=>{const x=b(),p=n=>{n.preventDefault(),x(`/dashboard/orders/${m}`)};return e.jsxs("div",{onClick:p,className:"order-container",children:[e.jsx("div",{className:"icon-open",children:e.jsx("img",{src:A,alt:"open"})}),e.jsxs("div",{className:"order-number",children:[e.jsxs("h3",{children:["#",i]}),e.jsxs("p",{children:["Date : ",new Date(a).toLocaleDateString()]})]}),e.jsxs("div",{className:"order-main-info",children:[e.jsx("div",{className:"order-total",children:e.jsxs("div",{children:[e.jsxs("p",{children:["Coût total :"," ",e.jsxs("span",{className:"info-bold",children:[t.reduce((n,s)=>n+s.quantity*s.stockItemId.pricePerUnit,0),"€"]})]}),e.jsxs("p",{children:["Quantité :"," ",e.jsxs("span",{className:"info-bold",children:[t.reduce((n,s)=>n+s.quantity,0)*450/1e3," ","kg"]})]})]})}),e.jsxs("div",{className:"order-delivery-info",children:[e.jsxs("p",{className:"info-bold",children:[h," ",u,", ",j]}),e.jsxs("p",{children:["Statut :"," ",e.jsxs("span",{className:"info-bold",children:[" ",y[l]||"Statut inconnu"]})," "]}),e.jsxs("p",{children:["Mode de livraison :"," ",C[r]||"Option inconnue"]}),r==="delivery"&&e.jsxs("p",{children:["Adresse de livraison :"," ",e.jsx("span",{className:"info-bold",children:o})]}),c&&e.jsxs("p",{children:["Commantaire: ",c]})]})]})]})},q=()=>{const[m,i]=d.useState(v),[a,l]=d.useState(1),[r]=d.useState(5),o=g(),{orders:h,loading:u,error:j,currentPage:c,totalPages:t,totalOrders:x}=N(s=>s.orders);d.useEffect(()=>{o(w({page:a,limit:r}))},[o,a,r]),d.useEffect(()=>{const s=()=>{const f=window.innerWidth;f<=430?i(v):f<=768?i(P):i(D)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const p=()=>{a<t&&l(a+1)},n=()=>{a>1&&l(a-1)};return e.jsxs("div",{className:"main",children:[e.jsx(S,{image:m,titleSpan:"Gestion des commandes",textPosition:"right"}),e.jsxs("section",{className:"orders",children:[e.jsxs("p",{className:"orders-number",children:["Nombre de commandes: ",x]}),h.map(s=>e.jsx(I,{id:s._id,number:s.number,userId:s.userId,status:s.status,deliveryOption:s.deliveryOption,deliveryAddress:s.deliveryAddress,createdAt:s.createdAt,updatedAt:s.updatedAt,orderItems:s.orderItems,firstName:s.firstName,lastName:s.lastName,mobilePhone:s.mobilePhone,comment:s.comment},s._id)),e.jsxs("div",{className:"pagination",children:[e.jsx("button",{onClick:n,disabled:a===1,children:e.jsx("svg",{fill:"#fff",height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 330 330",xmlSpace:"preserve",transform:"scale(-1 1)",children:e.jsx("path",{d:"m250.606 154.389-150-149.996c-5.857-5.858-15.355-5.858-21.213.001-5.857 5.858-5.857 15.355.001 21.213l139.393 139.39L79.393 304.394c-5.857 5.858-5.857 15.355.001 21.213C82.322 328.536 86.161 330 90 330s7.678-1.464 10.607-4.394l149.999-150.004a14.996 14.996 0 0 0 0-21.213z"})})}),e.jsx("div",{className:"pagination-text",children:e.jsxs("p",{children:["Page ",c," sur ",t]})}),e.jsx("button",{onClick:p,disabled:a===t,children:e.jsx("svg",{fill:"#fff",height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 330 330",xmlSpace:"preserve",children:e.jsx("path",{d:"m250.606 154.389-150-149.996c-5.857-5.858-15.355-5.858-21.213.001-5.857 5.858-5.857 15.355.001 21.213l139.393 139.39L79.393 304.394c-5.857 5.858-5.857 15.355.001 21.213C82.322 328.536 86.161 330 90 330s7.678-1.464 10.607-4.394l149.999-150.004a14.996 14.996 0 0 0 0-21.213z"})})})]})]}),e.jsx(O,{})]})};export{q as default};
