import{r as n,u as g,a as h,e as x,j as e,n as j,o as w}from"./index-DI_WgaGV.js";import{F as f,a as v,b as l}from"./formik.esm-K2k_Fa11.js";const N="/assets/images/login-background.png",c="/assets/images/login-background-mobile.png",k=()=>{const[d,r]=n.useState(c),o=g(),{loading:m,error:u,isAuthenticated:a}=h(s=>s.user),t=x();n.useEffect(()=>{const s=()=>{window.innerWidth<=430?r(c):r(N)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),n.useEffect(()=>{a&&t("/")},[a,t]);const p=async s=>{try{const i=await o(j({email:s.email,password:s.password})).unwrap();o(w(i))}catch(i){console.error("Échec de la connexion :",i)}};return a?e.jsx("div",{children:"Vous êtes connecté !"}):e.jsx("div",{className:"main",children:e.jsxs("div",{className:"login-container",children:[e.jsx("div",{className:"login-background-image",style:{backgroundImage:`url(${d})`}}),e.jsxs("div",{className:"login-form-wrapper",children:[e.jsx(f,{initialValues:{email:"",password:""},onSubmit:p,validate:s=>{const i={};return s.email||(i.email="L'email est requis"),s.password||(i.password="Le mot de passe est requis"),i},children:({errors:s,touched:i})=>e.jsxs(v,{className:"login-form",children:[e.jsx("h2",{children:"BIENVENUE"}),e.jsxs("div",{className:"login-inputs",children:[e.jsx("div",{className:"login-input",children:e.jsx(l,{type:"email",name:"email",placeholder:"Votre adresse email",required:!0})}),s.email&&i.email&&e.jsx("p",{children:s.email}),e.jsx("div",{className:"login-input",children:e.jsx(l,{type:"password",name:"password",placeholder:"Votre mot de passe",required:!0})}),s.password&&i.password&&e.jsx("p",{children:s.password})]}),u&&e.jsx("p",{className:"error-message",children:"Utilisateur non trouvé. Veuillez vérifier votre email et mot de passe."}),e.jsxs("button",{type:"submit",children:[" ",m?"Connexion en cours...":"Connexion"]})]})}),e.jsx("div",{className:"signup-link",children:e.jsx("a",{href:"register",children:"Créer un compte"})})]})]})})};export{k as default};
