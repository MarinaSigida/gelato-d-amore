import{j as e,c as b,r as c,a as l,e as k,u as g,p as N}from"./index-BIk-NbIX.js";import{O as f}from"./OverlayPopup.styled-B9oXmdWH.js";import{B}from"./Banner-CxWdXLyf.js";import{b as o,B as C,a as P}from"./banner-basket-mobile-Dr1XpIxD.js";import"./placeholder-ice-cream-CrNkbAc3.js";const w=({isPopupOpen:r,closePopup:n})=>{const i=a=>{a.target===a.currentTarget&&n()};return e.jsx(e.Fragment,{children:e.jsx(f,{onClick:i,children:e.jsxs("div",{className:`popup-container ${r?"open":"closed"}`,children:[e.jsx("div",{onClick:n,className:"icon-close",children:e.jsx("img",{src:b,alt:"close"})}),e.jsxs("div",{className:"signin-popup-content",children:[e.jsx("h2",{children:"Connexion ou inscription requise"}),e.jsx("ul",{className:"signin-popup-benefits",children:e.jsx("li",{children:"Pour passer une commande, vous devez être connecté ou créer un compte."})}),e.jsxs("div",{className:"signin-buttons",children:[e.jsx("div",{className:"signin-button",children:e.jsx("button",{children:e.jsx("a",{href:"/login",children:"Se connecter"})})}),e.jsx("div",{className:"divider",children:e.jsx("span",{children:"OU"})}),e.jsx("div",{className:"signin-button",children:e.jsx("button",{children:e.jsx("a",{href:"/register",children:"S'inscrire"})})})]})]})]})})})},z=()=>{const[r,n]=c.useState(o),[i,a]=c.useState(!1),{items:t,totalQuantity:d,totalAmount:h}=l(s=>s.basket),p=l(s=>s.user.user),m=k(),x=g();c.useEffect(()=>{const s=()=>{window.innerWidth<=430?n(o):n(P)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const u=()=>{x(N())},j=()=>{p?m("/place-order"):a(!0)},v=()=>{a(!1)};return e.jsxs("div",{className:"main",children:[e.jsx(B,{image:r}),e.jsxs("section",{className:"basket",children:[e.jsxs("h2",{className:"basket-title",children:["bienvenue dans votre ",e.jsx("span",{children:"panier"}),"!"]}),e.jsx("div",{className:"basket-content",children:e.jsxs("div",{className:"basket-items-total",children:[e.jsxs("div",{className:"basket-total",children:[e.jsxs("div",{className:"basket-total-price",children:[e.jsx("p",{children:"Coût total"}),e.jsx("div",{className:"price",children:e.jsxs("p",{children:[h," €"]})})]}),e.jsxs("div",{className:"basket-total-quantity",children:[e.jsx("p",{children:"Quantité"}),e.jsx("div",{className:"quantity",children:e.jsxs("p",{children:[d*450/1e3," kg"]})})]}),t.length>0&&e.jsx("div",{children:e.jsx("button",{className:"empty-basket-button",onClick:u,children:e.jsx("p",{children:"Vider le panier"})})})]}),e.jsx("div",{className:"basket-items",children:t.length>0?t.map(s=>e.jsx(C,{item:s},s.id)):e.jsx("div",{className:"empty-basket-message",children:e.jsx("p",{children:"Votre panier est vide."})})}),t.length>0&&e.jsx("div",{children:e.jsx("button",{onClick:j,children:"Passer commande"})})]})})]}),i&&e.jsx(w,{isPopupOpen:i,closePopup:v})]})};export{z as default};
