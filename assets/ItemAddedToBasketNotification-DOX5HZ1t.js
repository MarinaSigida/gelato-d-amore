import{r as g,a as y,u as E,j as s,t as p,b as _,c as $}from"./index-C3DiLdqf.js";import{i as x}from"./placeholder-ice-cream-CrNkbAc3.js";import{O as q}from"./OverlayPopup.styled-CwQq00J6.js";var D={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const A=D.VITE_IMAGE_KEY,O=({id:r,title:t,image:a,pricePerUnit:c,category:i,quantity:u,onClick:l,onAddToBasket:j})=>{const[n,o]=g.useState(1),h=y(e=>e.basket.items),v=E(),m=h.find(e=>e.id===r),b=m?m.quantity:0,d=u-b,f=()=>{o(e=>e<d?e+1:(p.error(`Vous ne pouvez pas ajouter plus de ${u} glaces ${t} à votre panier`),e))},N=()=>{n>1&&o(e=>e-1)},k=()=>{if(n>d){p.error(`La quantité demandée dépasse la limite de stock. Disponible: ${d}.`);return}const e={id:r,title:t,image:a,price:c,quantity:n};v(_(e)),j(e),o(1)};return s.jsxs("div",{className:"flavor-card",children:[s.jsx("div",{className:"flavor-card-image",children:s.jsx("img",{src:a?`${A}/${a}`:x,alt:t,onClick:l})}),s.jsx("h3",{className:"flavor-title",onClick:l,children:t}),s.jsx("p",{className:"flavor-category",onClick:l,children:i}),s.jsx("div",{className:"flavor-size",onClick:l,children:s.jsx("p",{children:"Poids : 450 g"})}),s.jsxs("div",{className:"price-and-quantity",children:[s.jsx("div",{className:"price",children:s.jsxs("p",{children:[c*n," €"]})}),s.jsx("div",{className:"quantity",children:s.jsx("p",{children:n})}),s.jsxs("div",{className:"quantity-btn-container",children:[s.jsx("button",{className:"quantity-btn",onClick:f,children:"+"}),s.jsx("button",{className:"quantity-btn",onClick:N,children:"-"})]})]}),s.jsx("button",{className:"buy-btn",onClick:k,children:"Ajouter au panier"})]})};var B={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const I=B.VITE_IMAGE_KEY,C=({isPopupOpen:r,closePopup:t,item:a})=>{const c=i=>{i.target===i.currentTarget&&t()};return s.jsx(s.Fragment,{children:s.jsx(q,{onClick:c,children:s.jsxs("div",{className:`popup-container ${r?"open":"closed"}`,children:[s.jsx("div",{onClick:t,className:"icon-close",children:s.jsx("img",{src:$,alt:"close"})}),s.jsx("div",{className:"product-popup-content",children:s.jsxs("div",{className:"product-popup-main-content",children:[s.jsx("div",{className:"product-popup-main-content-img",children:s.jsx("img",{src:a.image?`${I}/${a.image}`:x,alt:a.title})}),s.jsxs("div",{className:"product-popup-main-content-text",children:[s.jsxs("div",{className:"item-add-to-basket-text",children:[s.jsx("span",{children:a.title})," a été ajouté à votre panier !",s.jsx("br",{}),"Quantité : ",s.jsx("span",{children:a.quantity}),s.jsx("br",{}),"Montant total : ",s.jsxs("span",{children:[a.quantity*a.price," €"]})]}),s.jsxs("div",{className:"go-to-basket-btn-container",children:[s.jsx("button",{onClick:t,children:"Fermer"}),s.jsxs("a",{href:"/basket",className:"go-to-basket-btn",children:[s.jsx("svg",{className:"icon",alt:"basket",children:s.jsx("use",{xlinkHref:"/sprite.svg#basket"})}),s.jsx("p",{children:"Panier"})]})]})]})]})})]})})})};export{O as F,C as I};
